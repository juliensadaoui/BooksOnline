DROP TABLE BOOK;
DROP TABLE AUTHOR;

--
-- Set up database schema
--   
CREATE TABLE AUTHOR (
	ID INT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) PRIMARY KEY,
	FIRST_NAME VARCHAR(50) NOT NULL,
	LAST_NAME VARCHAR(50) NOT NULL,
	CONSTRAINT CONST_UNIQUE_AUTHOR UNIQUE(FIRST_NAME, LAST_NAME)
);

CREATE TABLE BOOK (
	ID INT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) PRIMARY KEY,
	NAME VARCHAR(50) NOT NULL,
	ID_AUTHOR INT NOT NULL,
	ISBN VARCHAR(10) NOT NULL,
	GENRE VARCHAR(50) NOT NULL,
	EXEMPLARY INT,
	CONSTRAINT CONST_UNIQUE_BOOK UNIQUE(ISBN)
);

ALTER TABLE BOOK ADD CONSTRAINT BOOK_FOREIGNKEY_AUTHOR_ID FOREIGN KEY (ID_AUTHOR)
    REFERENCES AUTHOR (ID);

 
--
-- Initialize with some values
--
INSERT INTO AUTHOR(FIRST_NAME,LAST_NAME) VALUES ('Emile','ZOLA');
INSERT INTO AUTHOR(FIRST_NAME,LAST_NAME) VALUES ('Jean','VOLTAIRE');
 
INSERT INTO BOOK(NAME,ID_AUTHOR,ISBN,GENRE,EXEMPLARY) VALUES ('LA CUREE',1,'ZOL568EMI','ROMAN',2);
INSERT INTO BOOK(NAME,ID_AUTHOR,ISBN,GENRE,EXEMPLARY) VALUES ('LA DEBACLE',1,'ZOL897EMI','ROMAN',1);
INSERT INTO BOOK(NAME,ID_AUTHOR,ISBN,GENRE,EXEMPLARY) VALUES ('GERMINAL',1,'ZOL387EMI','ROMAN',4);
INSERT INTO BOOK(NAME,ID_AUTHOR,ISBN,GENRE,EXEMPLARY) VALUES ('CANDIDE',2,'VOL765JEA','ROMAN',3);


--
-- Verification des insertion en BDD
--
SELECT * FROM AUTHOR;
SELECT * FROM BOOK;
